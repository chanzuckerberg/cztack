{
  "//": "NOTE: Generated by scripts/snowflake_generate_grant_all.\n\tChanges made directly to this file will be overwritten.\n\tMake improvements there so everyone can benefit.\n  The reason this module exists is that the provider only supports one grant resource per (database_name, schema_name, table_name, on_future, with_grant_option) tuple.\n\tFor example, if you used this module to grant an ALL privilege to a role you couldn't grant a subset of the ALL privs to another role.",
  "variable": {
    "enable_multiple_grants": {
      "type": "bool",
      "description": "When this is set to true, multiple grants of the same type can be created. This will cause Terraform to not revoke grants applied to roles and objects outside Terraform.",
      "default": null
    },
    "per_privilege_grants": {
      "type": "map(object({roles = list(string)}))",
      "description": "A map of privileges to authorized roles and shares. Privileges must be UPPER case.\n  This allows you to authorize extra roles/shares for specific privileges.",
      "default": {}
    },
    "roles": {
      "type": "set(string)",
      "description": "Grants privilege to these roles.",
      "default": null
    },
    "with_grant_option": {
      "type": "bool",
      "description": "When this is set to true, allows the recipient role to grant the privileges to other roles.",
      "default": null
    }
  },
  "locals": {
    "privileges": [
      "APPLY MASKING POLICY",
      "APPLY ROW ACCESS POLICY",
      "APPLY TAG",
      "ATTACH POLICY",
      "CREATE ACCOUNT",
      "CREATE DATA EXCHANGE LISTING",
      "CREATE DATABASE",
      "CREATE INTEGRATION",
      "CREATE NETWORK POLICY",
      "CREATE ROLE",
      "CREATE SHARE",
      "CREATE USER",
      "CREATE WAREHOUSE",
      "EXECUTE MANAGED TASK",
      "EXECUTE TASK",
      "IMPORT SHARE",
      "MANAGE ACCOUNT SUPPORT CASES",
      "MANAGE GRANTS",
      "MANAGE ORGANIZATION SUPPORT CASES",
      "MANAGE USER SUPPORT CASES",
      "MONITOR EXECUTION",
      "MONITOR USAGE",
      "OVERRIDE SHARE RESTRICTIONS"
    ]
  },
  "resource": {
    "snowflake_account_grant": {
      "all": {
        "enable_multiple_grants": "${var.enable_multiple_grants}",
        "for_each": "${toset(local.privileges)}",
        "privilege": "${each.value}",
        "roles": "${setunion(\n\t\t\t\tvar.roles,\n\t\t\t\tlookup(var.per_privilege_grants, each.value, { roles = [] }).roles,\n\t\t\t\t)}",
        "with_grant_option": "${var.with_grant_option}"
      }
    }
  },
  "terraform": {
    "required_providers": {
      "snowflake": {
        "source": "Snowflake-Labs/snowflake",
        "version": "\u003e= 0.20.0"
      }
    }
  },
  "output": {
    "privileges": {
      "description": "Privileges that make up the ALL set.",
      "value": "${local.privileges}"
    }
  }
}